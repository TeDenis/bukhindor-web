# Active Context

## Текущий фокус работы
Создание единой страницы аутентификации с анимированными карточками для входа, регистрации и восстановления пароля, а также реализация системы версионирования приложения с секретными функциями доступа. Решение проблем с обновлением кода в Docker контейнере.

## Последние изменения
- ✅ Создана новая страница `AuthPage` с анимированными карточками
- ✅ Реализовано переключение между формами входа и регистрации с плавной анимацией
- ✅ Добавлена карточка "Забыли пароль" с анимацией
- ✅ Обновлен роутер для использования единой страницы аутентификации
- ✅ Обновлена главная страница для показа страницы аутентификации неавторизованным пользователям
- ✅ Реализована система версионирования приложения
- ✅ Создана страница `/version` с полной информацией о версии
- ✅ Добавлены зависимости package_info_plus и url_launcher
- ✅ Создана инструкция по версионированию (VERSIONING.md)
- ✅ Создан автоматический скрипт обновления версии
- ✅ Добавлена секретная функция открытия страницы версии через 4 клика на логотип совы
- ✅ Добавлена кнопка возврата к авторизации на странице версии
- ✅ **РЕШЕНА ПРОБЛЕМА С DOCKER**: Оптимизирован Dockerfile для решения проблем с кэшированием
- ✅ **Создан .dockerignore** для исключения ненужных файлов из Docker контекста
- ✅ **Обновлен docker-compose.yml** с добавлением healthcheck и опций пересборки
- ✅ **Создан скрипт docker-rebuild.sh** для принудительной пересборки контейнера

## Текущее состояние
- Новая страница аутентификации (`lib/features/auth/presentation/pages/auth_page.dart`) содержит:
  - Анимированную жидкость с пузырьками на фоне
  - **Карточку входа** с полями email и пароль
  - **Карточку регистрации** с полями: имя, email, пароль, подтверждение пароля
  - **Карточку восстановления пароля** с полем email и иконкой
  - Плавное переключение между тремя карточками с анимацией slide
  - Валидацию форм
  - Интеграцию с BLoC для управления состоянием
  - Динамическую высоту контейнера (450px для восстановления пароля, 500px для входа, 700px для регистрации)

- Система версионирования включает:
  - **Константы версии** в `lib/core/constants/app_constants.dart`
  - **Страницу версии** `/version` с полной информацией
  - **Виджеты** для отображения информации о версии, заметок о релизе и информации о разработке
  - **Инструкцию** по версионированию в `VERSIONING.md`
  - **Автоматический скрипт** `scripts/bump_version.sh` для обновления версии
  - **Ссылки** на страницу версии в главной странице и меню пользователя

- Секретные функции доступа:
  - **4 клика на логотип совы** открывают диалог для перехода на страницу версии
  - **Таймаут 3 секунды** между кликами для сброса счетчика
  - **Анимация при клике** с эффектом bounce
  - **Кнопка возврата** к авторизации на странице версии
  - **Диалог подтверждения** перед открытием страницы версии

- **Docker оптимизация**:
  - **Улучшенный Dockerfile** с принудительной очисткой и пересборкой
  - **Файл .dockerignore** для исключения ненужных файлов
  - **Обновленный docker-compose.yml** с healthcheck
  - **Скрипт docker-rebuild.sh** для решения проблем с кэшированием
  - **Документация** по использованию в scripts/README.md

## Следующие шаги
- Тестирование функциональности всех трех карточек
- Проверка анимаций и переходов
- Тестирование страницы версии
- Тестирование секретной функции доступа
- Тестирование Docker пересборки на сервере
- Возможные улучшения UI/UX
- Реализация реальной функциональности восстановления пароля

## Активные решения
- Использование единой страницы вместо отдельных страниц входа и регистрации
- Анимированное переключение карточек для лучшего UX
- Сохранение всех существующих функций аутентификации
- Добавление третьего состояния для восстановления пароля
- Семантическое версионирование (SemVer) для приложения
- Централизованное хранение информации о версии в константах
- Автоматизация процесса обновления версии через скрипт
- Секретный доступ к странице версии через интерактивный логотип
- Улучшенная навигация с кнопками возврата
- **Решение проблем Docker**: принудительная пересборка, очистка кэша, оптимизация слоев