# CI/CD Deployment Guide

## üö® –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–∫—É—â–µ–π —Å–±–æ—Ä–∫–æ–π

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è:

### 1. "Operation was canceled"
- –î–æ–ª–≥–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ (36+ —Å–µ–∫—É–Ω–¥)
- Timeout –≤ CI/CD —Å–∏—Å—Ç–µ–º–∞—Ö
- –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Flutter —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### 2. "SDK version solving failed"
- –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π Dart SDK
- –ü—Ä–æ–µ–∫—Ç —Ç—Ä–µ–±—É–µ—Ç Dart >=3.8.0, –Ω–æ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Flutter —Å–æ–¥–µ—Ä–∂–∞—Ç Dart 3.2.x
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ–º Flutter 3.24.5+ (—Å–æ–¥–µ—Ä–∂–∏—Ç Dart 3.5.0+)

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git pull
./scripts/ci-deploy.sh optimized
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–π Flutter –æ–±—Ä–∞–∑ `cirrusci/flutter:3.16.9`
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–¥–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ (2-3 –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ 10+)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ + Docker

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (—Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Flutter)
git pull
./scripts/ci-deploy.sh local
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–±
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Docker –æ–±—Ä–∞–∑
- –°–±–æ—Ä–∫–∞ Flutter –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–±–æ—Ä–∫–∞

```bash
# –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–µ –¥–≤–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
git pull
./scripts/ci-deploy.sh
```

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD Pipeline

### GitHub Actions Example

```yaml
name: Deploy to Test Server

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Deploy to server
      uses: appleboy/ssh-action@v1.2.2
      with:
        host: ${{ secrets.HOST }}
        username: ${{ secrets.USERNAME }}
        key: ${{ secrets.SSH_KEY }}
        script: |
          cd /path/to/bukhindor-web
          git pull
          ./scripts/ci-deploy.sh optimized
```

### Manual Deploy on Server

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
git clone https://github.com/TeDenis/bukhindor-web.git
cd bukhindor-web

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π
git pull
./scripts/ci-deploy.sh optimized

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:8080
docker ps | grep bukhindor-web
```

## üîß –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –≤—Å–µ –µ—â–µ –ø–∞–¥–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```bash
docker logs bukhindor-web
docker-compose logs -f
```

2. **–û—á–∏—Å—Ç–∏—Ç–µ Docker –∫—ç—à:**
```bash
docker system prune -a
./scripts/ci-deploy.sh optimized
```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É:**
```bash
./scripts/ci-deploy.sh local
```

### –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| `Operation was canceled` | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `optimized` –≤–∞—Ä–∏–∞–Ω—Ç |
| `No space left on device` | `docker system prune -a` |
| `Port already in use` | `docker stop bukhindor-web` |
| `Flutter not found` | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `optimized` –≤–º–µ—Å—Ç–æ `local` |

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **RAM**: 2GB+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4GB)
- **Docker**: 20.10+
- **docker-compose**: 1.29+
- **–°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ**: 2GB+

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ (–≤–∞—Ä–∏–∞–Ω—Ç 2)
- **Flutter SDK**: 3.16.9+
- **Dart SDK**: 3.0+

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
- **URL**: `http://server-ip:8080`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: `curl http://localhost:8080`
- **–õ–æ–≥–∏**: `docker logs -f bukhindor-web`

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è:
1. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –ø–æ–ª–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
2. –£–∫–∞–∂–∏—Ç–µ –≤–µ—Ä—Å–∏—é Docker –∏ –û–°
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –≤—ã–≤–æ–¥ `docker system info`